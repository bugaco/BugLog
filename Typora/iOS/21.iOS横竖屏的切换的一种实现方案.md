# iOS横竖屏的切换的一种实现方案

## 1.在`AppDelegate`中，声明一个变量来存储支持的屏幕方向：

```swift
		...
		// MARK: - 强制横屏
    var orientationLock = UIInterfaceOrientationMask.portrait
    
    func application(_ application: UIApplication, supportedInterfaceOrientationsFor window: UIWindow?) -> UIInterfaceOrientationMask {
        return self.orientationLock
    }
		...
```

这个方法，决定了app支持哪些朝向，并会覆盖`Info.plist`中的配置：

> f you do not implement this method, the app uses the values in the `UIInterfaceOrientation` key of the app’s `Info.plist` as the default interface orientations.

## 2.写一个工具结构体（或类），提供修app朝向的api：

```swift
extension AppDelegate {
    // MARK:  - 横屏管理
    struct AppUtility {
        static func lockOrientationToPortrait() {
            AppDelegate.AppUtility.lockOrientation(UIInterfaceOrientationMask.portrait, andRotateTo: UIInterfaceOrientation.portrait)
        }
        
        static func lockOrientationToLandscapeRight() {
            AppDelegate.AppUtility.lockOrientation(UIInterfaceOrientationMask.landscapeRight, andRotateTo: UIInterfaceOrientation.landscapeRight)
        }
        private static func lockOrientation(_ orientation: UIInterfaceOrientationMask) {
            if let delegate = UIApplication.shared.delegate as? AppDelegate {
                delegate.orientationLock = orientation
            }
        }
        
        private static func lockOrientation(_ orientation: UIInterfaceOrientationMask, andRotateTo rotateOrientation:UIInterfaceOrientation) {
            self.lockOrientation(orientation)
            UIDevice.current.setValue(rotateOrientation.rawValue, forKey: "orientation")
        }
    }	
```

## 3.使用方法

在ViewController的内部的生命周期内，改变朝向：

```
    override func viewWillAppear(_ animated: Bool) {
        super.viewWillAppear(animated)
        AppDelegate.AppUtility.lockOrientationToLandscapeRight()
    }
    
    override func viewWillDisappear(_ animated: Bool) {
        super.viewWillDisappear(animated)
        AppDelegate.AppUtility.lockOrientationToPortrait()
    }
```

